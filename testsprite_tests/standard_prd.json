{
  "meta": {
    "project": "Puerto Rico Private Mail Carrier Management System (PRMCMS)",
    "version": "1.0",
    "date": "2025-01",
    "prepared_by": "Generated by Software Development Manager"
  },
  "product_overview": "PRMCMS is a bilingual, mobile-first software platform designed to digitize and streamline operations for private mail service providers in Puerto Rico, with scalability for Caribbean expansion.",
  "core_goals": [
    "Digitize and automate mail and package management for private carriers",
    "Ensure regulatory compliance with USPS and Puerto Rico territorial laws",
    "Enhance customer experience with real-time notifications and self-service portals",
    "Optimize operational efficiency and revenue management",
    "Support multi-location operations with offline-capable mobile applications"
  ],
  "key_features": [
    "Comprehensive package intake, tracking, and secure release workflows with barcode scanning and photo documentation",
    "Mailbox rental management including availability tracking, digital rental agreements, and integrated billing with PR payment standards",
    "Automated compliance management covering CMRA quarterly certifications and Puerto Rico-specific regulatory requirements",
    "Bilingual (Spanish/English) staff and customer mobile apps with offline-first capabilities",
    "Real-time multi-channel customer notifications via SMS, Email, and in-app messaging",
    "Advanced analytics and reporting dashboards for operational and financial insights",
    "Robust authentication system including two-factor authentication and role-based access control",
    "Progressive web app features enabling offline functionality and seamless synchronization",
    "Integration with USPS, SURI, ATH MÃ³vil, Twilio, and compliance APIs",
    "Security-focused architecture with encryption, audit trails, and disaster recovery plans"
  ],
  "user_flow_summary": [
    "Staff log in via mobile or web apps with secure authentication and role-based access",
    "Operations staff perform package intake by scanning barcodes, capturing photos, and associating with customers, even offline",
    "System sends automated notifications to customers based on their language preference and communication channels",
    "Mailbox rental availability is viewed and managed with digital contracts and automatic renewal workflows",
    "Compliance module generates and submits required reports and alerts staff of upcoming deadlines",
    "Customers access their mail status, payment history, and schedule appointments via the customer mobile app",
    "Management monitors dashboard analytics to track performance, revenue, and compliance status",
    "System supports multi-location usage with data synchronization when connectivity is restored"
  ],
  "validation_criteria": [
    "Package processing time under 2 minutes per package intake",
    "Notification delivery success rate above 95% with multi-channel messaging",
    "Zero critical compliance violations in quarterly audits",
    "System uptime of at least 99.5% with offline functionality during outages",
    "Security measures including data encryption, multi-factor authentication, and audit logging are fully implemented",
    "Mobile apps support iOS and Android with offline-first design and Spanish-first interfaces",
    "User training completed within 2 weeks with 90% feature utilization",
    "Financial and operational reporting accurate and available in real-time"
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 18",
      "Vite",
      "Tailwind CSS",
      "shadcn/ui",
      "Supabase",
      "PostgreSQL",
      "PWA",
      "Capacitor"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "Complete authentication system with staff/customer login, password reset, and two-factor authentication",
        "files": [
          "src/contexts/AuthContext.tsx",
          "src/pages/Auth.tsx",
          "src/pages/auth/ResetPassword.tsx",
          "src/pages/Security.tsx"
        ]
      },
      {
        "name": "Routing System",
        "description": "Hash-based routing with lazy loading and protected routes",
        "files": [
          "src/pages/AppRouter.tsx",
          "src/utils/routeUtils.ts"
        ]
      },
      {
        "name": "Internationalization",
        "description": "Bilingual support (Spanish/English) with context-based language switching",
        "files": [
          "src/contexts/LanguageContext.tsx"
        ]
      },
      {
        "name": "Package Management",
        "description": "Package intake, tracking, and delivery management system",
        "files": [
          "src/hooks/usePackages.ts",
          "src/pages/PackageIntake.tsx",
          "src/pages/PackageTracking.tsx"
        ]
      },
      {
        "name": "Customer Management",
        "description": "Customer directory, mailbox management, and customer portal",
        "files": [
          "src/pages/Customers.tsx",
          "src/pages/CustomerPortal.tsx",
          "src/components/CustomerForm.tsx"
        ]
      },
      {
        "name": "Dashboard & Analytics",
        "description": "Main dashboard with statistics, analytics, and reporting",
        "files": [
          "src/pages/Dashboard.tsx",
          "src/components/analytics/CarrierBreakdownChart.tsx",
          "src/components/analytics/MetricCard.tsx"
        ]
      },
      {
        "name": "Device Management",
        "description": "IoT device tracking, mobile device management, and asset tracking",
        "files": [
          "src/pages/Devices.tsx",
          "src/components/devices/DeviceInventory.tsx",
          "src/components/devices/AssetTracking.tsx"
        ]
      },
      {
        "name": "Maps & Location",
        "description": "Google Maps integration, live tracking, and route optimization",
        "files": [
          "src/components/maps/GoogleMapsProvider.tsx",
          "src/components/maps/LiveTrackingMap.tsx",
          "src/components/maps/RouteOptimizer.tsx"
        ]
      },
      {
        "name": "Billing & Invoicing",
        "description": "Automated billing, invoice generation, and financial reporting",
        "files": [
          "src/components/billing/BillingRuns.tsx",
          "src/components/billing/CreateInvoiceDialog.tsx",
          "src/components/billing/FinancialReports.tsx"
        ]
      },
      {
        "name": "Employee Management",
        "description": "Employee tracking, payroll management, and performance monitoring",
        "files": [
          "src/components/employees/EmployeeCard.tsx",
          "src/components/employees/PayrollManager.tsx",
          "src/components/employees/PerformanceTracker.tsx"
        ]
      },
      {
        "name": "Inventory Management",
        "description": "Inventory tracking, analytics, and management system",
        "files": [
          "src/components/inventory/InventoryDashboard.tsx",
          "src/components/inventory/InventoryItems.tsx",
          "src/components/inventory/InventoryAnalytics.tsx"
        ]
      },
      {
        "name": "Last Mile Delivery",
        "description": "Delivery optimization, partnerships, and customer communication",
        "files": [
          "src/components/last-mile/DeliveryOptimization.tsx",
          "src/components/last-mile/DeliveryPartnerships.tsx",
          "src/components/last-mile/CustomerCommunication.tsx"
        ]
      },
      {
        "name": "Notifications System",
        "description": "Real-time notifications, alerts, and communication system",
        "files": [
          "src/hooks/useNotifications.ts",
          "src/components/notifications/NotificationCenter.tsx"
        ]
      },
      {
        "name": "Error Handling",
        "description": "Global error boundaries, route error handling, and graceful degradation",
        "files": [
          "src/components/common/GlobalErrorBoundary.tsx",
          "src/components/common/RouteErrorBoundary.tsx"
        ]
      },
      {
        "name": "Supabase Integration",
        "description": "Database integration, authentication, and edge functions",
        "files": [
          "src/integrations/supabase/client.ts",
          "supabase/functions/",
          "supabase/migrations/"
        ]
      },
      {
        "name": "PWA Features",
        "description": "Progressive Web App with offline capabilities and service worker",
        "files": [
          "public/manifest.json",
          "public/sw.js",
          "vite.config.ts"
        ]
      },
      {
        "name": "UI Components",
        "description": "Reusable UI components built with shadcn/ui and Tailwind CSS",
        "files": [
          "src/components/ui/",
          "src/index.css"
        ]
      },
      {
        "name": "Testing Framework",
        "description": "Playwright end-to-end testing and component testing",
        "files": [
          "tests/e2e/",
          "src/components/__tests__/"
        ]
      },
      {
        "name": "Performance Optimization",
        "description": "Code splitting, lazy loading, and performance optimizations",
        "files": [
          "vite.config.ts",
          "src/lib/performance.ts"
        ]
      },
      {
        "name": "Security Features",
        "description": "Security monitoring, audit logs, and compliance features",
        "files": [
          "src/components/security/",
          "src/pages/Security.tsx"
        ]
      }
    ]
  }
}
