/* Low Bandwidth Optimization Styles */
/* Optimized for Puerto Rico's variable internet infrastructure */

.low-bandwidth-reduced {
  /* Reduce animation complexity */
  animation-duration: 0.1s !important;
  transition-duration: 0.1s !important;
}

.low-bandwidth-reduced * {
  /* Disable non-essential animations */
  animation-delay: 0s !important;
  transition-delay: 0s !important;
  animation-iteration-count: 1 !important;
}

.low-bandwidth-reduced img,
.low-bandwidth-reduced video {
  /* Optimize media loading */
  image-rendering: optimizeSpeed;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: optimize-contrast;
}

.low-bandwidth-reduced [data-loading="lazy"] {
  /* Defer non-critical content */
  opacity: 0.7;
  filter: blur(1px);
}

.low-bandwidth-minimal {
  /* Minimal visual design */
  box-shadow: none !important;
  border-radius: 0 !important;
  background-image: none !important;
  backdrop-filter: none !important;
}

.low-bandwidth-minimal * {
  /* Remove decorative elements */
  box-shadow: none !important;
  text-shadow: none !important;
  background-image: none !important;
  backdrop-filter: none !important;
  filter: none !important;
}

.low-bandwidth-minimal .gradient,
.low-bandwidth-minimal .shadow,
.low-bandwidth-minimal .backdrop-blur {
  /* Remove expensive visual effects */
  background: transparent !important;
  box-shadow: none !important;
  backdrop-filter: none !important;
}

/* Prefers-reduced-data media query support */
@media (prefers-reduced-data: reduce) {
  img,
  video {
    /* Don't auto-load media on reduced data preference */
    content-visibility: auto;
  }
  
  .animation,
  .transition {
    /* Disable animations for data savings */
    animation: none !important;
    transition: none !important;
  }
  
  .background-image {
    /* Remove background images */
    background-image: none !important;
  }
}

/* Bandwidth-specific optimizations */
@media (max-width: 480px) and (max-resolution: 1dppx) {
  /* Low-resolution mobile devices */
  .high-res-only {
    display: none;
  }
  
  img {
    /* Reduce image quality on low-res displays */
    image-rendering: optimizeSpeed;
  }
}

/* Critical content prioritization */
.bandwidth-critical {
  /* Ensure critical content loads first */
  content-visibility: visible !important;
  contain-intrinsic-size: auto;
}

.bandwidth-deferred {
  /* Defer non-critical content */
  content-visibility: auto;
  contain-intrinsic-size: 200px;
}

/* Network-aware loading states */
.slow-connection-indicator {
  position: fixed;
  top: env(safe-area-inset-top, 0);
  left: 0;
  right: 0;
  background: linear-gradient(90deg, #F39C12, #E67E22);
  color: white;
  padding: 8px 16px;
  text-align: center;
  font-size: 12px;
  z-index: 1000;
  transform: translateY(-100%);
  transition: transform 0.3s ease;
}

.slow-connection-indicator.visible {
  transform: translateY(0);
}

/* Data saver mode */
.data-saver-mode {
  /* Simplified layout for data conservation */
  gap: 8px !important;
  padding: 8px !important;
  margin: 4px !important;
}

.data-saver-mode img,
.data-saver-mode video {
  /* Placeholder for media in data saver mode */
  background: #f0f0f0;
  border: 1px dashed #ccc;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.data-saver-mode img::before,
.data-saver-mode video::before {
  content: "ðŸ“· Imagen / Image";
  color: #666;
  font-size: 12px;
}

/* Caribbean theme low-bandwidth variants */
.caribbean-low-bandwidth {
  /* Simplified Caribbean colors for low bandwidth */
  --primary-ocean-low: #1a5490;
  --primary-sunrise-low: #e55a2b;
  --primary-palm-low: #27ae60;
}

.caribbean-low-bandwidth {
  background: var(--primary-ocean-low);
  color: white;
}

/* Performance hints for browsers */
.bandwidth-optimized {
  /* Hint to browser about performance priorities */
  contain: layout style paint;
  content-visibility: auto;
  contain-intrinsic-size: 0 200px;
}

/* Loading indicators for slow connections */
.slow-loading {
  position: relative;
  min-height: 40px;
}

.slow-loading::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid #f3f3f3;
  border-radius: 50%;
  border-top: 2px solid #0B5394;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Text-only fallbacks */
.text-only-mode img,
.text-only-mode video,
.text-only-mode .media {
  display: none;
}

.text-only-mode .media-placeholder {
  display: block;
  padding: 8px;
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  border-radius: 4px;
  text-align: center;
  font-size: 12px;
  color: #6c757d;
}

/* Progressive enhancement for better connections */
@media (min-width: 768px) and (min-resolution: 2dppx) {
  .progressive-enhancement {
    /* Enable enhanced features on better devices/connections */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
  }
}
